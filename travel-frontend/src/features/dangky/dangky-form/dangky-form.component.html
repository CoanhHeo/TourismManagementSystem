<div class="user-info" *ngIf="currentUser" style="background: #f0f8ff; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
  <h3 style="margin: 0 0 10px 0; color: #007bff;">Thông tin khách hàng</h3>
  <p style="margin: 5px 0;"><strong>Tên:</strong> {{ currentUser.tenKhachHang }}</p>
  <p style="margin: 5px 0;"><strong>Tuổi:</strong> {{ currentUser.tuoi }}</p>
  <p style="margin: 5px 0;"><strong>Quê quán:</strong> {{ currentUser.queQuan }}</p>
  <button type="button" (click)="logout()" style="background: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px;">
    Đăng xuất
  </button>
</div>

<h2>Đăng ký tour du lịch</h2>

<form (ngSubmit)="submit()" #f="ngForm" class="form">
  <label>Chọn tour</label>
  <select [(ngModel)]="form.idTour" name="idTour" required>
    <option [ngValue]="null" disabled>-- chọn --</option>
    <option *ngFor="let t of tours" [ngValue]="t.idTour">
      {{ t.tenTour }} — {{ t.giaTourGoc | number }}₫
    </option>
  </select>

  <label>Số lượng</label>
  <input type="number" [(ngModel)]="form.soLuong" name="soLuong" min="1" required />

  <button type="submit" [disabled]="!f.valid || loading">Đăng ký</button>
</form>

<div *ngIf="loading">Đang xử lý...</div>
<div *ngIf="error" style="color:red">{{ error }}</div>
<div *ngIf="tongGia !== null" class="result">
  <strong>Tổng giá:</strong> {{ tongGia | number }}₫
</div>

<p style="margin-top:16px">
  Xem <a routerLink="/tours">report danh sách tour</a>
</p>